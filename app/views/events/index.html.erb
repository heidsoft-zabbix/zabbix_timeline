<% content_for :header do %>
  <%= javascript_include_tag 'http://www.google.com/jsapi' %>
  <%= javascript_include_tag :timeline %>
  <%= stylesheet_link_tag :timeline %>

  <%= javascript_tag do %>
    google.load("visualization", "1");

    // Set callback to run when API is loaded
    google.setOnLoadCallback(drawVisualization);

    // Called when the Visualization API is loaded.
    function drawVisualization() {
      // Create and populate a data table.
      var data = new google.visualization.DataTable();
      data.addColumn('datetime', 'start');
      data.addColumn('datetime', 'end');
      data.addColumn('string', 'content');

      data.addRows([
        [new Date(2010,7,23),        null,               'Conversation<br><img src="http://almende.github.io/chap-links-library/js/timeline/examples/img/comments-icon.png" style="width:32px; height:32px;">'],
        [new Date(2010,7,23,23,0,0), null,               'Mail from boss<br><img src="http://almende.github.io/chap-links-library/js/timeline/examples/img/mail-icon.png" style="width:32px; height:32px;">'],
        [new Date(2010,7,24,16,0,0), null,               'Report'],
        [new Date(2010,7,26),        new Date(2010,8,2), 'Traject A'],
        [new Date(2010,7,28),        null,               'Memo<br><img src="http://almende.github.io/chap-links-library/js/timeline/examples/img/notes-edit-icon.png" style="width:48px; height:48px;">'],
        [new Date(2010,7,29),        null,               'Phone call<br><img src="http://almende.github.io/chap-links-library/js/timeline/examples/img/Hardware-Mobile-Phone-icon.png" style="width:32px; height:32px;">'],
        [new Date(2010,7,31),        new Date(2010,8,3), 'Traject B'],
        [new Date(2010,8,4,12,0,0),  null,               'Report<br><img src="http://almende.github.io/chap-links-library/js/timeline/examples/img/attachment-icon.png" style="width:32px; height:32px;">']
      ]);

      // specify options
      var options = {
          "width":  "100%",
          "height": "300px",
          "style": "box"
      };

      // Instantiate our timeline object.
      var timeline = new links.Timeline(document.getElementById('mytimeline'), options);

      // Draw our timeline with the created data and options
      timeline.draw(data);
    }
  <% end %>
<% end %>

<h1>Events#index</h1>
<p>Find me in app/views/events/index.html.erb</p>

<div id="mytimeline"></div>

<% Event.get.each do |event| %>
  eventid: <%= event.eventid %><br/>
  triggerid: <%= event.triggerid %><br/>
  subject: <%= event.subject %><br/>
  url: <%= event.url %><br/><br/>
<% end %>
